<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.5.57">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Aryamik Sharma">
<meta name="dcterms.date" content="2025-09-14">

<title>Can data explain Architects’ rise to fame? – Aryamik Sharma</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { display: inline-block; text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="../../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../../site_libs/quarto-search/fuse.min.js"></script>
<script src="../../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../../">
<script src="../../site_libs/quarto-html/quarto.js"></script>
<script src="../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../../site_libs/quarto-html/anchor.min.js"></script>
<link href="../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "textbox",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>


</head>

<body class="nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top quarto-banner">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a class="navbar-brand" href="../../index.html">
    <span class="navbar-title">Aryamik Sharma</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" role="menu" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item">
    <a class="nav-link" href="../../posts.html"> 
<span class="menu-text">Sympatheia</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../Disclaimer.html"> 
<span class="menu-text">Disclaimer</span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://www.linkedin.com/in/aryamik-sharma"> <i class="bi bi-linkedin" role="img">
</i> 
<span class="menu-text"></span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="mailto:aryamik.sharma@uwaterloo.ca"> <i class="bi bi-envelope" role="img" aria-label="email">
</i> 
<span class="menu-text"></span></a>
  </li>  
</ul>
          </div> <!-- /navcollapse -->
            <div class="quarto-navbar-tools">
</div>
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<header id="title-block-header" class="quarto-title-block default page-columns page-full">
  <div class="quarto-title-banner page-columns page-full">
    <div class="quarto-title column-body">
      <h1 class="title">Can data explain Architects’ rise to fame?</h1>
                                <div class="quarto-categories">
                <div class="quarto-category">Data Science</div>
              </div>
                  </div>
  </div>
    
  
  <div class="quarto-title-meta">

      <div>
      <div class="quarto-title-meta-heading">Author</div>
      <div class="quarto-title-meta-contents">
               <p><a href="https://aryamik.github.io">Aryamik Sharma</a> </p>
            </div>
    </div>
      
      <div>
      <div class="quarto-title-meta-heading">Published</div>
      <div class="quarto-title-meta-contents">
        <p class="date">September 14, 2025</p>
      </div>
    </div>
    
      
    </div>
    
  
  </header><div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar zindex-bottom">
    </div>
<!-- main -->
<main class="content quarto-banner-title-block page-columns page-full" id="quarto-document-content">





<p>Years ago, when I used to think programming was nothing but ‘typing numbers on a blackscreen’, I came across this interesting <a href="https://freedium.cfd/https://medium.com/data-science/using-data-to-find-the-most-brutal-cannibal-corpse-song-bf318d0b3ef4">article</a> by Rapheal Burki who used <a href="https://developer.spotify.com/documentation/web-api">Spotify’s API</a> to find the most brutal Cannibal Corpse song by analysing various <a href="https://developer.spotify.com/documentation/web-api/reference/get-audio-features">audio features</a> such as ‘valence’ and ‘loudness’. As a metalhead, I always wanted to do something similar for my own playlists.</p>
<p>Last year, I started noodling around with Spotify’s API and was able to get a list of my top 50 songs along with their audio features. I became really fascinated with these audio features and I knew that there was a data science project somewhere in there. One idea I had was getting a list of different metal songs from various playlists along with their audio features and then find tracks with similar audio features that I would be interested in by using a <em>k</em>-Means Clustering algorithm.</p>
<p>Somehow it fell off, and I decided to get back on this project a couple of weeks ago. Unfortunately, in November 2024, <a href="https://developer.spotify.com/blog/2024-11-27-changes-to-the-web-api">Spotify made some changes</a> to their Web API and they deprecated some of the functionalities such as retrieving the audio features of different tracks.</p>
<p>Herein lies an important life lesson - there is a ‘Goldilocks Zone’ of doing things where you have a narrow window of opportunity to get something done. If you miss that opportunity, you may never find it again.</p>
<p>That was until I found out about <a href="https://www.last.fm/api">Last.Fm</a> and <a href="https://docs.genius.com/">Genius</a>.</p>
<p>Last.Fm is a website that allows users to create a history of what they listened to, share and compare profiles with other users, and recommend playlists based on those profiles. So think of Facebook meeting Spotify (or Apple Music or Youtube Music if that’s your thing). Genius on the other hand, is a community-based platform where users can look for lyrics for their favorite songs and is often described as ‘<a href="https://genius.com/Genius-about-genius-annotated">world’s biggest music encyclopedia</a>’.</p>
<p>Lucky for me, both these platforms had APIs which means I had data to work with.</p>
<div class="quarto-figure quarto-figure-center page-columns page-full">
<figure class="figure page-columns page-full">
<p><img src="images/clipboard-2517171252.png" class="img-fluid figure-img"></p>
<figcaption class="margin-caption">Pretty accurate description if you ask me</figcaption>
</figure>
</div>
<p>So I decided to pivot on my original project and instead do something related to my favorite artist of all time - Architects.</p>
<p>One look at my top 50 songs and it does not take a genius to figure out that Architects is something that I have been listening to on-repeat since 2018. Ironically enough, I was introduced to their music through Spotify.</p>
<p>But something about their music has always resonated with me. Maybe it is their ‘bleghs’ or their catchy riffs or maybe it is their profound lyrics that have evolved over time. Architects is a band with quite a history. It would be an understatement to say that they were one of the pioneers of the modern metalcore scene.</p>
<p>Needless to say, I was finally able to see them live for the first time in 2024 when they were here in Toronto along with Of Mice &amp; Men and While She Sleeps. Clearly they were as good as I thought they would be. So when they announced their 2025 North American Tour of <em>The Sky, The Earth &amp; All Between</em>, it was a no brainer for me to see them again this year in August.</p>
<div class="quarto-figure quarto-figure-center page-columns page-full">
<figure class="figure page-columns page-full">
<p><img src="images/2024-05-02-21-23-23-830.jpg" class="img-fluid figure-img"></p>
<figcaption class="margin-caption">My first time seeing Architects live in 2024 at REBEL</figcaption>
</figure>
</div>
<p>It was one of those concerts where I was 100% locked in from start to finish and till this date one of my greatest experiences. I liked it so much that I lowkey peer pressured my brother to attend their concert in NY. And guess what? He ended up becoming a fan. Mission accomplished.</p>
<div class="quarto-figure quarto-figure-center page-columns page-full">
<figure class="figure page-columns page-full">
<p><img src="images/IMG_20250814_211615_932.jpg" class="img-fluid figure-img"></p>
<figcaption class="margin-caption">My second Architects concert in 2025 at The Great Casino</figcaption>
</figure>
</div>
<p>Just like with any other artist that achieves a certain level of fame and commercial success, people start having all sorts of opinions about that. For a band like Architects, that has been touring with big hitters like Linkin Park, it is no different. The traditionalists seem to enjoy the older stuff whereas the new age fans seem to like their modern stuff.</p>
<p>Clearly this has been a topic of contention in online metalcore communities. <em>cough</em> r/metalcore <em>cough</em>.</p>
<p>So it gave me a couple of hypotheses to test:</p>
<ul>
<li><p>How has Architects’ popularity evolved over time?</p></li>
<li><p>What has been the average sentiment of their albums and how has it evolved over time?</p></li>
<li><p>Can we identify any themes by analysing their lyrics?</p></li>
</ul>
<p>So let’s jump right in:</p>
<section id="how-has-architects-popularity-evolved-over-time" class="level2">
<h2 class="anchored" data-anchor-id="how-has-architects-popularity-evolved-over-time">How has Architects’ popularity evolved over time?</h2>
<p>Quantifying ‘popularity’ is not an easy thing to do. I mean how even would you do that? Sure, you can keep a track of Billboard Rankings, Number of Listeners, Net Worth etc. But they serve as a proxy for measuring popularity. That is until I came across Spotify’s Popularity Index. Naturally, I was curious to know what that meant. I looked around and found <a href="https://community.spotify.com/t5/Spotify-for-Developers/question-about-the-popularity-score-of-an-artist/td-p/5795193">this answer</a> by Ximzend on Spotify’s Community Forum:</p>
<blockquote class="blockquote">
<p>Copied from API reference pages:<br>
“The artist’s popularity is calculated from the popularity of all the artist’s tracks.” -&nbsp;<a href="https://developer.spotify.com/documentation/web-api/reference/get-an-artist" class="uri">https://developer.spotify.com/documentation/web-api/reference/get-an-artist</a><br>
“The popularity is calculated by algorithm and is based, in the most part, on the total number of plays the track has had and how recent those plays are.<br>
Generally speaking, songs that are being played a lot now will have a higher popularity than songs that were played a lot in the past. Duplicate tracks (e.g.&nbsp;the same track from a single and an album) are rated independently. Artist and album popularity is derived mathematically from track popularity.&nbsp;<em><strong>Note</strong>: the popularity value may lag actual popularity by a few days: the value is not updated in real time.” -&nbsp;<a href="https://developer.spotify.com/documentation/web-api/reference/get-several-tracks" class="uri">https://developer.spotify.com/documentation/web-api/reference/get-several-tracks</a></em></p>
</blockquote>
<p>Just like Billboard Rankings and other metrics that I mentioned above, it is not a ‘true’ measure of popularity. Also based on the description, I suspect there will be a recency bias towards the newer albums. But I thought why not give it a go?</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> spotipy</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> spotipy.oauth2 <span class="im">import</span> SpotifyClientCredentials</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> pandas <span class="im">as</span> pd</span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a>client_id<span class="op">=</span><span class="st">''</span></span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a>client_secret<span class="op">=</span><span class="st">'xxxx'</span></span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-9"><a href="#cb1-9" aria-hidden="true" tabindex="-1"></a>auth_manager <span class="op">=</span> SpotifyClientCredentials(client_id<span class="op">=</span>client_id, client_secret<span class="op">=</span>client_secret)</span>
<span id="cb1-10"><a href="#cb1-10" aria-hidden="true" tabindex="-1"></a>sp <span class="op">=</span> spotipy.Spotify(auth_manager<span class="op">=</span>auth_manager)</span>
<span id="cb1-11"><a href="#cb1-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-12"><a href="#cb1-12" aria-hidden="true" tabindex="-1"></a>results <span class="op">=</span> sp.search(q<span class="op">=</span><span class="st">'Architects'</span>, <span class="bu">type</span><span class="op">=</span><span class="st">'artist'</span>, limit<span class="op">=</span><span class="dv">1</span>)</span>
<span id="cb1-13"><a href="#cb1-13" aria-hidden="true" tabindex="-1"></a>artist_id <span class="op">=</span> results[<span class="st">'artists'</span>][<span class="st">'items'</span>][<span class="dv">0</span>][<span class="st">'id'</span>]</span>
<span id="cb1-14"><a href="#cb1-14" aria-hidden="true" tabindex="-1"></a>albums <span class="op">=</span> sp.artist_albums(artist_id<span class="op">=</span>artist_id, album_type<span class="op">=</span><span class="st">'album'</span>, limit<span class="op">=</span><span class="dv">50</span>)</span>
<span id="cb1-15"><a href="#cb1-15" aria-hidden="true" tabindex="-1"></a>album_popularity <span class="op">=</span> {}</span>
<span id="cb1-16"><a href="#cb1-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-17"><a href="#cb1-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-18"><a href="#cb1-18" aria-hidden="true" tabindex="-1"></a><span class="co"># Calculating the average popularity of Architects' albums</span></span>
<span id="cb1-19"><a href="#cb1-19" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> album <span class="kw">in</span> albums[<span class="st">'items'</span>]:</span>
<span id="cb1-20"><a href="#cb1-20" aria-hidden="true" tabindex="-1"></a>    album_name <span class="op">=</span> album[<span class="st">'name'</span>]</span>
<span id="cb1-21"><a href="#cb1-21" aria-hidden="true" tabindex="-1"></a>    album_id <span class="op">=</span> album[<span class="st">'id'</span>]</span>
<span id="cb1-22"><a href="#cb1-22" aria-hidden="true" tabindex="-1"></a>    tracks <span class="op">=</span> sp.album_tracks(album_id)</span>
<span id="cb1-23"><a href="#cb1-23" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb1-24"><a href="#cb1-24" aria-hidden="true" tabindex="-1"></a>    popularity_scores <span class="op">=</span> []</span>
<span id="cb1-25"><a href="#cb1-25" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb1-26"><a href="#cb1-26" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> track <span class="kw">in</span> tracks[<span class="st">'items'</span>]:</span>
<span id="cb1-27"><a href="#cb1-27" aria-hidden="true" tabindex="-1"></a>        track_info <span class="op">=</span> sp.track(track[<span class="st">'id'</span>])</span>
<span id="cb1-28"><a href="#cb1-28" aria-hidden="true" tabindex="-1"></a>        popularity_scores.append(track_info[<span class="st">'popularity'</span>])</span>
<span id="cb1-29"><a href="#cb1-29" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb1-30"><a href="#cb1-30" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> popularity_scores:</span>
<span id="cb1-31"><a href="#cb1-31" aria-hidden="true" tabindex="-1"></a>        avg_popularity <span class="op">=</span> <span class="bu">sum</span>(popularity_scores) <span class="op">/</span> <span class="bu">len</span>(popularity_scores)</span>
<span id="cb1-32"><a href="#cb1-32" aria-hidden="true" tabindex="-1"></a>        album_popularity[album_name] <span class="op">=</span> <span class="bu">round</span>(avg_popularity, <span class="dv">2</span>)</span>
<span id="cb1-33"><a href="#cb1-33" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-34"><a href="#cb1-34" aria-hidden="true" tabindex="-1"></a>df <span class="op">=</span> pd.DataFrame.from_dict(album_popularity, orient<span class="op">=</span><span class="st">'index'</span>, columns<span class="op">=</span>[<span class="st">'Avg Popularity'</span>])</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>In general, their popularity has trended upwards for the most part.</p>
<p><img src="images/output.png" class="img-fluid"></p>
<p>Perhaps one of the most significant events in the band’s history was in 2016 when Tom Searle, the lead guitarist and primary songwriter passed away in 2016 after a long battle with skin cancer. It wasn’t just a huge loss to the band, but the metalcore community as well.</p>
<p>Something else I wanted to look at was the listener count of each of the albums. This is something that Last.Fm’s API provides access to. This metric represents the active listeners who are currently listening to Architects on Last.Fm. Just like Spotify’s Popularity Index, this metric is a snapshot at a point in time and it has certain limitations meaning it’s not capturing the total number of listeners across all platforms like Spotify, Apple Music and Youtube. But I still thought it might serve as a proxy for the band’s popularity over time.</p>
<p><img src="images/output1.png" class="img-fluid"></p>
<p>We can see that the listener count started rapidly increasing since <em>All Our Gods Have Abandoned Us</em> until they hit the peak at <em>For Those That Wish To Exist.</em> When it comes to <em>the classic symptoms of a broken spirit,</em> we see a sudden drop in the listener counts. Fans had mixed reactions towards this new direction the band was going with some claiming they had gone commericial and it could partly explain that drop. But if you look at the entire plot, the listener count for this album is on par with some of their older stuff such as <em>Lost Forever // Lost Together</em>. I personally think that if you are a band like Architects who has been producing music for well over 20 years, eventually you’ll encounter the ‘commercial’ accusation.</p>
<p>Finally, here are the two metrics plotted together.</p>
<p><img src="images/clipboard-2097126054.png" class="img-fluid"></p>
<p>Keeping aside the limitations of these two metrics for a moment, we can see some interesting patterns here. As per Spotify’s Popularity Index, <em>The Sky, The Earth &amp; All Between</em> is one of their most popular records. but it’s not even the most listened record on Last.Fm. Conversely, <em>For Those That Wish To Exist</em> has the highest listener count according to Last.Fm, but it’s popularity index is around 50. When I think about it, Animals is their most watched video on Youtube with around 35 million views.</p>
<p><img src="images/clipboard-1107459308.png" class="img-fluid"></p>
<p>On Spotify, it is their most popular track with around 140 million listeners at the time of this writing.</p>
<p><img src="images/clipboard-2868491001.png" class="img-fluid"></p>
<p>In conclusion, looking at these two metrics tells us a little bit about their evolution as a band. But just like all things in life, there is more than meets the eye.</p>
</section>
<section id="what-has-been-the-average-sentiment-of-their-albums-and-how-has-it-evolved-over-time" class="level2">
<h2 class="anchored" data-anchor-id="what-has-been-the-average-sentiment-of-their-albums-and-how-has-it-evolved-over-time">What has been the average sentiment of their albums and how has it evolved over time?</h2>
<p>Just like Raphael did for Cannibal Corpse’s discography, I wanted to quantify the ‘heaviness’ of Architects’ songs. But that ship had sailed. So I had to come up with something new. Then I thought why not do something with their lyrics? Maybe analyse the average sentiment of their albums over time?</p>
<p>As a first step, I downloaded the lyrics of all their records using Genius API. The only limitation I encountered was that Genius did not have lyrics for their first album <em>Nightmares.</em> To calculate the average sentiment acorss the different albums, I decided to use <a href="https://github.com/cjhutto/vaderSentiment">VADER</a> (Valence Aware Dictionariy and sEntiment Reasoner). It is a lexicon and rule-based sentiment analysis tool that is used for analysing sentiments in social media. But before I could do that, I had to clean the lyrics, and get rid of stopwords and punctuation.</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> json</span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> lyricsgenius</span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> nltk.sentiment.vader <span class="im">import</span> SentimentIntensityAnalyzer</span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> nltk</span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> re</span>
<span id="cb2-6"><a href="#cb2-6" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> string</span>
<span id="cb2-7"><a href="#cb2-7" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> collections <span class="im">import</span> defaultdict</span>
<span id="cb2-8"><a href="#cb2-8" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> nltk.corpus <span class="im">import</span> stopwords</span>
<span id="cb2-9"><a href="#cb2-9" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> nltk.tokenize <span class="im">import</span> word_tokenize</span>
<span id="cb2-10"><a href="#cb2-10" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> nltk</span>
<span id="cb2-11"><a href="#cb2-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-12"><a href="#cb2-12" aria-hidden="true" tabindex="-1"></a>GENIUS_ACCESS_TOKEN <span class="op">=</span> <span class="st">'xxxxxx'</span></span>
<span id="cb2-13"><a href="#cb2-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-14"><a href="#cb2-14" aria-hidden="true" tabindex="-1"></a><span class="co"># Authenticate Genius</span></span>
<span id="cb2-15"><a href="#cb2-15" aria-hidden="true" tabindex="-1"></a>genius_lyrics <span class="op">=</span> lyricsgenius.Genius(GENIUS_ACCESS_TOKEN, timeout<span class="op">=</span><span class="dv">10</span>, retries<span class="op">=</span><span class="dv">3</span>)</span>
<span id="cb2-16"><a href="#cb2-16" aria-hidden="true" tabindex="-1"></a>genius_lyrics.excluded_terms <span class="op">=</span> [<span class="st">"(Remix)"</span>, <span class="st">"(Live)"</span>]</span>
<span id="cb2-17"><a href="#cb2-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-18"><a href="#cb2-18" aria-hidden="true" tabindex="-1"></a>albums <span class="op">=</span> [</span>
<span id="cb2-19"><a href="#cb2-19" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Nightmares"</span>, <span class="st">"Ruin"</span>, <span class="st">"Hollow Crown"</span>, <span class="st">"The Here and Now"</span>, <span class="st">"Daybreaker"</span>,</span>
<span id="cb2-20"><a href="#cb2-20" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Lost Forever // Lost Together"</span>, <span class="st">"All Our Gods Have Abandoned Us"</span>,</span>
<span id="cb2-21"><a href="#cb2-21" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Holy Hell"</span>, <span class="st">"For Those That Wish to Exist"</span>,</span>
<span id="cb2-22"><a href="#cb2-22" aria-hidden="true" tabindex="-1"></a>    <span class="st">"The Classic Symptoms of a Broken Spirit"</span>,</span>
<span id="cb2-23"><a href="#cb2-23" aria-hidden="true" tabindex="-1"></a>    <span class="st">"The Sky, the Earth &amp; All Between"</span></span>
<span id="cb2-24"><a href="#cb2-24" aria-hidden="true" tabindex="-1"></a>]</span>
<span id="cb2-25"><a href="#cb2-25" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-26"><a href="#cb2-26" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> get_album_id(artist_name, album_name):</span>
<span id="cb2-27"><a href="#cb2-27" aria-hidden="true" tabindex="-1"></a>    results <span class="op">=</span> spotify.search(q<span class="op">=</span><span class="ss">f"album:</span><span class="sc">{</span>album_name<span class="sc">}</span><span class="ss"> artist:</span><span class="sc">{</span>artist_name<span class="sc">}</span><span class="ss">"</span>, <span class="bu">type</span><span class="op">=</span><span class="st">"album"</span>, limit<span class="op">=</span><span class="dv">1</span>)</span>
<span id="cb2-28"><a href="#cb2-28" aria-hidden="true" tabindex="-1"></a>    items <span class="op">=</span> results[<span class="st">'albums'</span>][<span class="st">'items'</span>]</span>
<span id="cb2-29"><a href="#cb2-29" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> items[<span class="dv">0</span>][<span class="st">'id'</span>] <span class="cf">if</span> items <span class="cf">else</span> <span class="va">None</span></span>
<span id="cb2-30"><a href="#cb2-30" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-31"><a href="#cb2-31" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> get_album_tracks(album_id):</span>
<span id="cb2-32"><a href="#cb2-32" aria-hidden="true" tabindex="-1"></a>    results <span class="op">=</span> spotify.album_tracks(album_id)</span>
<span id="cb2-33"><a href="#cb2-33" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> [track[<span class="st">'name'</span>] <span class="cf">for</span> track <span class="kw">in</span> results[<span class="st">'items'</span>]]</span>
<span id="cb2-34"><a href="#cb2-34" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-35"><a href="#cb2-35" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> get_lyrics(artist, track):</span>
<span id="cb2-36"><a href="#cb2-36" aria-hidden="true" tabindex="-1"></a>    <span class="cf">try</span>:</span>
<span id="cb2-37"><a href="#cb2-37" aria-hidden="true" tabindex="-1"></a>        song <span class="op">=</span> genius.search_song(track, artist)</span>
<span id="cb2-38"><a href="#cb2-38" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> song.lyrics <span class="cf">if</span> song <span class="cf">else</span> <span class="va">None</span></span>
<span id="cb2-39"><a href="#cb2-39" aria-hidden="true" tabindex="-1"></a>    <span class="cf">except</span>:</span>
<span id="cb2-40"><a href="#cb2-40" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> <span class="va">None</span></span>
<span id="cb2-41"><a href="#cb2-41" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-42"><a href="#cb2-42" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> main():</span>
<span id="cb2-43"><a href="#cb2-43" aria-hidden="true" tabindex="-1"></a>    data <span class="op">=</span> {}</span>
<span id="cb2-44"><a href="#cb2-44" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-45"><a href="#cb2-45" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> album <span class="kw">in</span> albums:</span>
<span id="cb2-46"><a href="#cb2-46" aria-hidden="true" tabindex="-1"></a>        <span class="bu">print</span>(<span class="ss">f"\Album: </span><span class="sc">{</span>album<span class="sc">}</span><span class="ss">"</span>)</span>
<span id="cb2-47"><a href="#cb2-47" aria-hidden="true" tabindex="-1"></a>        album_id <span class="op">=</span> get_album_id(<span class="st">"Architects"</span>, album)</span>
<span id="cb2-48"><a href="#cb2-48" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> <span class="kw">not</span> album_id:</span>
<span id="cb2-49"><a href="#cb2-49" aria-hidden="true" tabindex="-1"></a>            <span class="bu">print</span>(<span class="st">"  Not found on Spotify."</span>)</span>
<span id="cb2-50"><a href="#cb2-50" aria-hidden="true" tabindex="-1"></a>            <span class="cf">continue</span></span>
<span id="cb2-51"><a href="#cb2-51" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-52"><a href="#cb2-52" aria-hidden="true" tabindex="-1"></a>        tracks <span class="op">=</span> get_album_tracks(album_id)</span>
<span id="cb2-53"><a href="#cb2-53" aria-hidden="true" tabindex="-1"></a>        data[album] <span class="op">=</span> {}</span>
<span id="cb2-54"><a href="#cb2-54" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-55"><a href="#cb2-55" aria-hidden="true" tabindex="-1"></a>        <span class="cf">for</span> track <span class="kw">in</span> tracks:</span>
<span id="cb2-56"><a href="#cb2-56" aria-hidden="true" tabindex="-1"></a>            <span class="bu">print</span>(<span class="ss">f" </span><span class="sc">{</span>track<span class="sc">}</span><span class="ss">"</span>)</span>
<span id="cb2-57"><a href="#cb2-57" aria-hidden="true" tabindex="-1"></a>            lyrics <span class="op">=</span> get_lyrics(<span class="st">"Architects"</span>, track)</span>
<span id="cb2-58"><a href="#cb2-58" aria-hidden="true" tabindex="-1"></a>            <span class="cf">if</span> lyrics:</span>
<span id="cb2-59"><a href="#cb2-59" aria-hidden="true" tabindex="-1"></a>                data[album][track] <span class="op">=</span> lyrics</span>
<span id="cb2-60"><a href="#cb2-60" aria-hidden="true" tabindex="-1"></a>            <span class="cf">else</span>:</span>
<span id="cb2-61"><a href="#cb2-61" aria-hidden="true" tabindex="-1"></a>                <span class="bu">print</span>(<span class="st">" Lyrics not found."</span>)</span>
<span id="cb2-62"><a href="#cb2-62" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-63"><a href="#cb2-63" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb2-64"><a href="#cb2-64" aria-hidden="true" tabindex="-1"></a>    <span class="cf">with</span> <span class="bu">open</span>(<span class="st">"lyrics.json"</span>, <span class="st">"w"</span>, encoding<span class="op">=</span><span class="st">"utf-8"</span>) <span class="im">as</span> f:</span>
<span id="cb2-65"><a href="#cb2-65" aria-hidden="true" tabindex="-1"></a>        json.dump(data, f, indent<span class="op">=</span><span class="dv">2</span>, ensure_ascii<span class="op">=</span><span class="va">False</span>)</span>
<span id="cb2-66"><a href="#cb2-66" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-67"><a href="#cb2-67" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(<span class="st">"</span><span class="ch">\n</span><span class="st">Lyrics saved to 'lyrics.json'."</span>)</span>
<span id="cb2-68"><a href="#cb2-68" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-69"><a href="#cb2-69" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> <span class="va">__name__</span> <span class="op">==</span> <span class="st">"__main__"</span>:</span>
<span id="cb2-70"><a href="#cb2-70" aria-hidden="true" tabindex="-1"></a>    main()</span>
<span id="cb2-71"><a href="#cb2-71" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb2-72"><a href="#cb2-72" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb2-73"><a href="#cb2-73" aria-hidden="true" tabindex="-1"></a>nltk.download(<span class="st">'punkt'</span>)</span>
<span id="cb2-74"><a href="#cb2-74" aria-hidden="true" tabindex="-1"></a>nltk.download(<span class="st">'stopwords'</span>)</span>
<span id="cb2-75"><a href="#cb2-75" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-76"><a href="#cb2-76" aria-hidden="true" tabindex="-1"></a><span class="cf">with</span> <span class="bu">open</span>(<span class="st">"lyrics.json"</span>, <span class="st">"r"</span>, encoding<span class="op">=</span><span class="st">"utf-8"</span>) <span class="im">as</span> f:</span>
<span id="cb2-77"><a href="#cb2-77" aria-hidden="true" tabindex="-1"></a>    data <span class="op">=</span> json.load(f)</span>
<span id="cb2-78"><a href="#cb2-78" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-79"><a href="#cb2-79" aria-hidden="true" tabindex="-1"></a>stop_words <span class="op">=</span> <span class="bu">set</span>(stopwords.words(<span class="st">'english'</span>))</span>
<span id="cb2-80"><a href="#cb2-80" aria-hidden="true" tabindex="-1"></a>punctuation <span class="op">=</span> <span class="bu">set</span>(string.punctuation)</span>
<span id="cb2-81"><a href="#cb2-81" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-82"><a href="#cb2-82" aria-hidden="true" tabindex="-1"></a><span class="co"># cleaning the lyrics</span></span>
<span id="cb2-83"><a href="#cb2-83" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> clean_text(text):</span>
<span id="cb2-84"><a href="#cb2-84" aria-hidden="true" tabindex="-1"></a>    text <span class="op">=</span> re.sub(<span class="vs">r'\[.*?\]'</span>, <span class="st">''</span>, text)</span>
<span id="cb2-85"><a href="#cb2-85" aria-hidden="true" tabindex="-1"></a>    text <span class="op">=</span> text.lower()</span>
<span id="cb2-86"><a href="#cb2-86" aria-hidden="true" tabindex="-1"></a>    text <span class="op">=</span> re.sub(<span class="vs">r'\n'</span>, <span class="st">' '</span>, text)      </span>
<span id="cb2-87"><a href="#cb2-87" aria-hidden="true" tabindex="-1"></a>    text <span class="op">=</span> re.sub(<span class="vs">r'[^a-z\s]'</span>, <span class="st">''</span>, text) </span>
<span id="cb2-88"><a href="#cb2-88" aria-hidden="true" tabindex="-1"></a>    tokens <span class="op">=</span> word_tokenize(text)</span>
<span id="cb2-89"><a href="#cb2-89" aria-hidden="true" tabindex="-1"></a>    tokens <span class="op">=</span> [word <span class="cf">for</span> word <span class="kw">in</span> tokens <span class="cf">if</span> word <span class="kw">not</span> <span class="kw">in</span> stop_words <span class="kw">and</span> <span class="bu">len</span>(word) <span class="op">&gt;</span> <span class="dv">2</span>]</span>
<span id="cb2-90"><a href="#cb2-90" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> tokens</span>
<span id="cb2-91"><a href="#cb2-91" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-92"><a href="#cb2-92" aria-hidden="true" tabindex="-1"></a>cleaned_lyrics <span class="op">=</span> defaultdict(<span class="bu">list</span>)</span>
<span id="cb2-93"><a href="#cb2-93" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-94"><a href="#cb2-94" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> album, tracks <span class="kw">in</span> data.items():</span>
<span id="cb2-95"><a href="#cb2-95" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> song, lyrics <span class="kw">in</span> tracks.items():</span>
<span id="cb2-96"><a href="#cb2-96" aria-hidden="true" tabindex="-1"></a>        tokens <span class="op">=</span> clean_text(lyrics)</span>
<span id="cb2-97"><a href="#cb2-97" aria-hidden="true" tabindex="-1"></a>        cleaned_lyrics[album].extend(tokens)</span>
<span id="cb2-98"><a href="#cb2-98" aria-hidden="true" tabindex="-1"></a>    </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>To calculate the average sentiment score, I went with a very basic approach of first calculating the sentiment for all the songs in an album and then calculating an average.</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a>nltk.download(<span class="st">'vader_lexicon'</span>)</span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a><span class="cf">with</span> <span class="bu">open</span>(<span class="st">"lyrics.json"</span>, <span class="st">"r"</span>, encoding<span class="op">=</span><span class="st">"utf-8"</span>) <span class="im">as</span> f:</span>
<span id="cb3-5"><a href="#cb3-5" aria-hidden="true" tabindex="-1"></a>    data <span class="op">=</span> json.load(f)</span>
<span id="cb3-6"><a href="#cb3-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-7"><a href="#cb3-7" aria-hidden="true" tabindex="-1"></a>sid <span class="op">=</span> SentimentIntensityAnalyzer()</span>
<span id="cb3-8"><a href="#cb3-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-9"><a href="#cb3-9" aria-hidden="true" tabindex="-1"></a>album_sentiments <span class="op">=</span> {}</span>
<span id="cb3-10"><a href="#cb3-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-11"><a href="#cb3-11" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> album, tracks <span class="kw">in</span> data.items():</span>
<span id="cb3-12"><a href="#cb3-12" aria-hidden="true" tabindex="-1"></a>    sentiments <span class="op">=</span> []</span>
<span id="cb3-13"><a href="#cb3-13" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> track, lyrics <span class="kw">in</span> tracks.items():</span>
<span id="cb3-14"><a href="#cb3-14" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> lyrics:</span>
<span id="cb3-15"><a href="#cb3-15" aria-hidden="true" tabindex="-1"></a>            scores <span class="op">=</span> sid.polarity_scores(lyrics)</span>
<span id="cb3-16"><a href="#cb3-16" aria-hidden="true" tabindex="-1"></a>            sentiments.append(scores[<span class="st">'compound'</span>])</span>
<span id="cb3-17"><a href="#cb3-17" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> sentiments:</span>
<span id="cb3-18"><a href="#cb3-18" aria-hidden="true" tabindex="-1"></a>        avg_sentiment <span class="op">=</span> <span class="bu">sum</span>(sentiments) <span class="op">/</span> <span class="bu">len</span>(sentiments)</span>
<span id="cb3-19"><a href="#cb3-19" aria-hidden="true" tabindex="-1"></a>    <span class="cf">else</span>:</span>
<span id="cb3-20"><a href="#cb3-20" aria-hidden="true" tabindex="-1"></a>        avg_sentiment <span class="op">=</span> <span class="dv">0</span></span>
<span id="cb3-21"><a href="#cb3-21" aria-hidden="true" tabindex="-1"></a>    album_sentiments[album] <span class="op">=</span> avg_sentiment</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p><img src="images/output-01.png" class="img-fluid"></p>
<p>This one did not surprise me and you’ll see why shortly.</p>
<p>Here is the plot of their popularity vs the average sentiment scores of their albums.</p>
<p><img src="images/clipboard-1132009327.png" class="img-fluid"></p>
<p>Unlike their popularity index, the average sentiment scores have trended downwards. Let’s look at how their average sentiment scores along with the listener count:</p>
<p><img src="images/clipboard-2403308100.png" class="img-fluid"></p>
<p>One could say that there is <em>somewhat</em> of an inverse correlation between the sentiment scores and their listener count, especially if you look at the trend between <em>Lost Forever // Lost Together</em> to <em>For Those That Wish To Exist</em> . Again the key word is <em>somewhat</em>.</p>
<p>So can we conclude that the data definitively proves that their ‘heavier stuff’ is behind their success? I don’t think so. We are just looking at lyrics. This analysis does not factor in their musical style, their riffs and possibly a hundred other confounding variables that have made them who they are.</p>
<p>While I was analysing lyrics, I knew it would be a missed opportunity if I didn’t look at the frequency of the signature Architects’ BLEGH!™ across their albums. So I had to do it and here we are:</p>
<p><img src="images/clipboard-2733999067.png" class="img-fluid"></p>
<p>Alright folks, that’s a wrap! Case closed. The data clearly shows <em>All Our Gods Have Abandoned Us</em> is the the greatest metalcore albums of all time.</p>
<p>Jokes aside, I knew there was one more thing left for me to do.</p>
</section>
<section id="can-we-identify-any-themes-by-analysing-their-lyrics" class="level2 page-columns page-full">
<h2 class="anchored" data-anchor-id="can-we-identify-any-themes-by-analysing-their-lyrics">Can we identify any themes by analysing their lyrics?</h2>
<p>It was time for the good ol’ reliable…</p>
<p><img src="images/clipboard-201303468.png" class="img-fluid"></p>
<p>Since I had all the lyrics in front of me, I said why not run it through a LLM, let it do the analysis and see what it has to say. I decided to use <a href="https://ai.meta.com/blog/llama-4-multimodal-intelligence/">Llama 4 Maverick</a> .</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> openai <span class="im">import</span> OpenAI</span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a>client <span class="op">=</span> OpenAI(</span>
<span id="cb4-4"><a href="#cb4-4" aria-hidden="true" tabindex="-1"></a>    base_url<span class="op">=</span><span class="st">"https://openrouter.ai/api/v1"</span>,</span>
<span id="cb4-5"><a href="#cb4-5" aria-hidden="true" tabindex="-1"></a>    api_key<span class="op">=</span><span class="st">"sk-XXXXXX"</span>,</span>
<span id="cb4-6"><a href="#cb4-6" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb4-7"><a href="#cb4-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-8"><a href="#cb4-8" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> album_themes(album_name, combined_lyrics):</span>
<span id="cb4-9"><a href="#cb4-9" aria-hidden="true" tabindex="-1"></a>    prompt <span class="op">=</span> [</span>
<span id="cb4-10"><a href="#cb4-10" aria-hidden="true" tabindex="-1"></a>        {</span>
<span id="cb4-11"><a href="#cb4-11" aria-hidden="true" tabindex="-1"></a>            <span class="st">"type"</span>: <span class="st">"text"</span>,</span>
<span id="cb4-12"><a href="#cb4-12" aria-hidden="true" tabindex="-1"></a>            <span class="st">"text"</span>: (</span>
<span id="cb4-13"><a href="#cb4-13" aria-hidden="true" tabindex="-1"></a>                <span class="ss">f"You are a music analyst. Summarize the main themes, emotions, and stories explored "</span></span>
<span id="cb4-14"><a href="#cb4-14" aria-hidden="true" tabindex="-1"></a>                <span class="ss">f"in the album '</span><span class="sc">{</span>album_name<span class="sc">}</span><span class="ss">' by analyzing the following lyrics. "</span></span>
<span id="cb4-15"><a href="#cb4-15" aria-hidden="true" tabindex="-1"></a>                <span class="st">"Provide a concise paragraph highlighting the key topics and tone of the album.</span><span class="ch">\n\n</span><span class="st">"</span></span>
<span id="cb4-16"><a href="#cb4-16" aria-hidden="true" tabindex="-1"></a>                <span class="ss">f"Lyrics:</span><span class="ch">\n</span><span class="sc">{</span>combined_lyrics[:<span class="dv">4000</span>]<span class="sc">}</span><span class="ss">"</span>  <span class="co"># truncate for token limit</span></span>
<span id="cb4-17"><a href="#cb4-17" aria-hidden="true" tabindex="-1"></a>            )</span>
<span id="cb4-18"><a href="#cb4-18" aria-hidden="true" tabindex="-1"></a>        }</span>
<span id="cb4-19"><a href="#cb4-19" aria-hidden="true" tabindex="-1"></a>    ]</span>
<span id="cb4-20"><a href="#cb4-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-21"><a href="#cb4-21" aria-hidden="true" tabindex="-1"></a>    completion <span class="op">=</span> client.chat.completions.create(</span>
<span id="cb4-22"><a href="#cb4-22" aria-hidden="true" tabindex="-1"></a>        model<span class="op">=</span><span class="st">"meta-llama/llama-4-maverick:free"</span>,</span>
<span id="cb4-23"><a href="#cb4-23" aria-hidden="true" tabindex="-1"></a>        messages<span class="op">=</span>[</span>
<span id="cb4-24"><a href="#cb4-24" aria-hidden="true" tabindex="-1"></a>            {</span>
<span id="cb4-25"><a href="#cb4-25" aria-hidden="true" tabindex="-1"></a>                <span class="st">"role"</span>: <span class="st">"user"</span>,</span>
<span id="cb4-26"><a href="#cb4-26" aria-hidden="true" tabindex="-1"></a>                <span class="st">"content"</span>: prompt</span>
<span id="cb4-27"><a href="#cb4-27" aria-hidden="true" tabindex="-1"></a>            }</span>
<span id="cb4-28"><a href="#cb4-28" aria-hidden="true" tabindex="-1"></a>        ]</span>
<span id="cb4-29"><a href="#cb4-29" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb4-30"><a href="#cb4-30" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> completion.choices[<span class="dv">0</span>].message.content.strip()</span>
<span id="cb4-31"><a href="#cb4-31" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb4-32"><a href="#cb4-32" aria-hidden="true" tabindex="-1"></a>  album_summaries <span class="op">=</span> {}</span>
<span id="cb4-33"><a href="#cb4-33" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-34"><a href="#cb4-34" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> album, songs <span class="kw">in</span> data.items():</span>
<span id="cb4-35"><a href="#cb4-35" aria-hidden="true" tabindex="-1"></a>    combined_lyrics <span class="op">=</span> <span class="st">"</span><span class="ch">\n\n</span><span class="st">"</span>.join(songs.values())</span>
<span id="cb4-36"><a href="#cb4-36" aria-hidden="true" tabindex="-1"></a>    summary <span class="op">=</span> album_themes(album, combined_lyrics)</span>
<span id="cb4-37"><a href="#cb4-37" aria-hidden="true" tabindex="-1"></a>    album_summaries[album] <span class="op">=</span> summary</span>
<span id="cb4-38"><a href="#cb4-38" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-39"><a href="#cb4-39" aria-hidden="true" tabindex="-1"></a><span class="cf">with</span> <span class="bu">open</span>(<span class="st">"album_summaries.json"</span>, <span class="st">"w"</span>, encoding<span class="op">=</span><span class="st">"utf-8"</span>) <span class="im">as</span> f:</span>
<span id="cb4-40"><a href="#cb4-40" aria-hidden="true" tabindex="-1"></a>    json.dump(album_summaries, f, indent<span class="op">=</span><span class="dv">2</span>, ensure_ascii<span class="op">=</span><span class="va">False</span>)</span>
<span id="cb4-41"><a href="#cb4-41" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb4-42"><a href="#cb4-42" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb4-43"><a href="#cb4-43" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> album_themes(album_summaries):</span>
<span id="cb4-44"><a href="#cb4-44" aria-hidden="true" tabindex="-1"></a>    summary_text <span class="op">=</span> <span class="st">"</span><span class="ch">\n\n</span><span class="st">"</span>.join([<span class="ss">f"</span><span class="sc">{</span>album<span class="sc">}</span><span class="ss">:</span><span class="ch">\n</span><span class="sc">{</span>summary<span class="sc">}</span><span class="ss">"</span> <span class="cf">for</span> album, summary <span class="kw">in</span> album_summaries.items()])</span>
<span id="cb4-45"><a href="#cb4-45" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-46"><a href="#cb4-46" aria-hidden="true" tabindex="-1"></a>    prompt <span class="op">=</span> [</span>
<span id="cb4-47"><a href="#cb4-47" aria-hidden="true" tabindex="-1"></a>        {</span>
<span id="cb4-48"><a href="#cb4-48" aria-hidden="true" tabindex="-1"></a>            <span class="st">"type"</span>: <span class="st">"text"</span>,</span>
<span id="cb4-49"><a href="#cb4-49" aria-hidden="true" tabindex="-1"></a>            <span class="st">"text"</span>: (</span>
<span id="cb4-50"><a href="#cb4-50" aria-hidden="true" tabindex="-1"></a>                <span class="st">"You are a music critic who analyzes the evolution of a band's themes and styles over time. "</span></span>
<span id="cb4-51"><a href="#cb4-51" aria-hidden="true" tabindex="-1"></a>                <span class="st">"Below are summaries of albums of a band in chronological order:</span><span class="ch">\n\n</span><span class="st">"</span></span>
<span id="cb4-52"><a href="#cb4-52" aria-hidden="true" tabindex="-1"></a>                <span class="ss">f"</span><span class="sc">{</span>combined_summary_text<span class="sc">}</span><span class="ch">\n\n</span><span class="ss">"</span></span>
<span id="cb4-53"><a href="#cb4-53" aria-hidden="true" tabindex="-1"></a>                <span class="st">"Please write a detailed comparison describing how the themes, tone, and lyrical style evolved "</span></span>
<span id="cb4-54"><a href="#cb4-54" aria-hidden="true" tabindex="-1"></a>                <span class="st">"across these albums. Highlight any noticeable changes or recurring motifs."</span></span>
<span id="cb4-55"><a href="#cb4-55" aria-hidden="true" tabindex="-1"></a>            )</span>
<span id="cb4-56"><a href="#cb4-56" aria-hidden="true" tabindex="-1"></a>        }</span>
<span id="cb4-57"><a href="#cb4-57" aria-hidden="true" tabindex="-1"></a>    ]</span>
<span id="cb4-58"><a href="#cb4-58" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-59"><a href="#cb4-59" aria-hidden="true" tabindex="-1"></a>    completion <span class="op">=</span> client.chat.completions.create(</span>
<span id="cb4-60"><a href="#cb4-60" aria-hidden="true" tabindex="-1"></a>        model<span class="op">=</span><span class="st">"meta-llama/llama-4-maverick:free"</span>,</span>
<span id="cb4-61"><a href="#cb4-61" aria-hidden="true" tabindex="-1"></a>        messages<span class="op">=</span>[</span>
<span id="cb4-62"><a href="#cb4-62" aria-hidden="true" tabindex="-1"></a>            {</span>
<span id="cb4-63"><a href="#cb4-63" aria-hidden="true" tabindex="-1"></a>                <span class="st">"role"</span>: <span class="st">"user"</span>,</span>
<span id="cb4-64"><a href="#cb4-64" aria-hidden="true" tabindex="-1"></a>                <span class="st">"content"</span>: prompt</span>
<span id="cb4-65"><a href="#cb4-65" aria-hidden="true" tabindex="-1"></a>            }</span>
<span id="cb4-66"><a href="#cb4-66" aria-hidden="true" tabindex="-1"></a>        ]</span>
<span id="cb4-67"><a href="#cb4-67" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb4-68"><a href="#cb4-68" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> completion.choices[<span class="dv">0</span>].message.content.strip()</span>
<span id="cb4-69"><a href="#cb4-69" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-70"><a href="#cb4-70" aria-hidden="true" tabindex="-1"></a>comparison <span class="op">=</span> album_themes(album_summaries)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>And this is what the Llama had to say</p>
<blockquote class="blockquote">
<p>Evolution of Themes Across Albums</p>
<p>The discography of Architects presents a complex and thought-provoking exploration of the human condition, with themes, tone, and lyrical style evolving significantly across their albums. From the early “Ruin” to the latest “The Sky, the Earth &amp; All Between,” the band has navigated a diverse range of emotions, ideas, and experiences, reflecting the turmoil and introspection that often characterizes their music.</p>
<p>One of the most striking aspects of Architects’ evolution is their consistent exploration of themes related to disillusionment, frustration, and existential crisis. Albums like “Hollow Crown,” “The Here and Now,” “Daybreaker,” and “Lost Forever // Lost Together” all grapple with the darkness and despair that can accompany feelings of disconnection and hopelessness. These themes are often linked to critiques of societal ills, such as corruption, oppression, and the erosion of empathy and unity. The band’s lyrics frequently express outrage, anger, and desperation, reflecting their concern with the state of the world and humanity’s role in shaping it.</p>
<p>Over time, however, the band’s tone has shifted from one of intense anguish and despair to a more nuanced and introspective exploration of the human condition. Albums like “All Our Gods Have Abandoned Us” and “For Those That Wish to Exist” still convey a sense of desperation and frustration, but they also introduce a more explicit sense of resignation and hopelessness. The tone becomes increasingly dark and fatalistic, with the band lamenting the destructive nature of humanity and the collapse of societal values.</p>
<p>In contrast, “Holy Hell” marks a significant departure from this trend, as the band explores themes of mortality, loss, and acceptance in a more contemplative and introspective manner. The album’s tone is melancholic and reflective, with the narrator grappling with the inevitability of death and the transience of human existence. This shift towards a more somber and accepting tone is notable, as it suggests a growing awareness of the complexities and mysteries of life and death.</p>
<p>The band’s most recent albums, including “The Classic Symptoms of a Broken Spirit” and “The Sky, the Earth &amp; All Between,” continue this trend towards introspection and self-discovery. While still critiquing societal ills and expressing frustration and outrage, the band’s tone has become more intense and unapologetic, with a greater emphasis on resilience, rebellion, and individuality. The lyrics reveal a narrative of overcoming adversity and rising above the negativity and toxicity of others, with the speaker refusing to be held back by pain and trauma.</p>
<p>Throughout their discography, Architects have employed a range of lyrical styles, from the surreal and absurd metaphors of “Ruin” to the more direct and scathing critiques of societal ills in later albums. The band’s use of imagery and symbolism has remained a consistent feature of their work, with vivid and often unsettling pictures of a world in crisis or collapse. The repetition of certain phrases and refrains, such as “we’re still holding on for dear life” or “we all fall in parallel,” has become a hallmark of their style, underscoring the sense of desperation and frustration that pervades much of their music.</p>
<p>Despite the many changes and evolutions in their style and themes, certain motifs have recurred throughout Architects’ discography. The struggle for individuality and authenticity in the face of societal pressure and conformity is a persistent concern, as is the critique of institutionalized faith and the search for meaning in a seemingly indifferent or hostile universe. The band’s exploration of mortality, loss, and the human condition has become increasingly nuanced and complex, reflecting their ongoing grappling with the complexities and mysteries of existence.</p>
<p>In conclusion, Architects’ discography presents a complex and thought-provoking exploration of the human condition, with themes, tone, and lyrical style evolving significantly across their albums. While certain motifs have recurred throughout their work, the band’s willingness to experiment and challenge themselves has resulted in a diverse and often provocative body of work.</p>
</blockquote>
<p>That just sums it up. <em>All Our Gods Have Abandoned Us</em> is regarded as one of the greatest metalcore albums of all time and I 100% agree with that. I found out about this album and the backstory long after Tom Searle’s death in 2016. He was diagnosed with Stage 4 melanoma and he went into this album knowing this was going to be his last. Clearly it is an album of Tom coming to grips with his imminent demise. Perhaps that is why it has deeply touched me and millions of other folks because it is such an emotional piece of art. <em>Holy Hell</em> was about grief, accepting what’s left behind and moving forwards. I, for one, really enjoyed their latest record <em>The Sky, The Earth &amp; All Between</em>. I like the industrial/synthcore direction that they are going in. It can be very largerly attributed to the fact that Jordan Fish was heavily involved in the production of this record and I am sure Tom would be proud of it as well.</p>
<div class="quarto-figure quarto-figure-center page-columns page-full">
<figure class="figure page-columns page-full">
<p><a href="https://highlightmagazine.net/2016/08/23/architects-tom-searle-honored-by-fans-and-fellow-musicians/"><img src="images/Untitled.jpg" class="img-fluid figure-img" alt="Source: Highlight Magazine"></a></p>
<figcaption class="margin-caption">Source: Highlight Magazine</figcaption>
</figure>
</div>
<p>In conclusion, Architects will always be near and dear to my heart and Tom still inspires me even today, not just to write better riffs but to be a better person. Architects is on my ‘Mt. Rushmore’ of artists along with Linkin Park and Avenged Sevenfold (I still can’t decide who will be occupy the fourth spot).</p>
<p>So I guess Keep Calm and Metal On? Or given that it’s Architects, Keep Calm and Blegh On?</p>
<p></p><div style="width:100%;height:0;padding-bottom:56%;position:relative;"><iframe src="https://giphy.com/embed/26xBMgwfLdHm0ohZS" width="100%" height="100%" style="position:absolute" frameborder="0" class="giphy-embed" allowfullscreen=""></iframe></div><p><a href="https://giphy.com/gifs/epitaphrecords-music-video-26xBMgwfLdHm0ohZS">via GIPHY</a></p>


</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const onCopySuccess = function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  }
  const getTextToCopy = function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
    text: getTextToCopy
  });
  clipboard.on('success', onCopySuccess);
  if (window.document.getElementById('quarto-embedded-source-code-modal')) {
    // For code content inside modals, clipBoardJS needs to be initialized with a container option
    // TODO: Check when it could be a function (https://github.com/zenorocha/clipboard.js/issues/860)
    const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
      text: getTextToCopy,
      container: window.document.getElementById('quarto-embedded-source-code-modal')
    });
    clipboardModal.on('success', onCopySuccess);
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp('/' + window.location.host + '/');
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
<script src="https://utteranc.es/client.js" repo="Aryamik/aryamik.github.io" issue-term="pathname" theme="github-light" crossorigin="anonymous" async="">
</script>
</div> <!-- /content -->




</body></html>