<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.3.450">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Aryamik Sharma">
<meta name="dcterms.date" content="2024-07-21">

<title>Aryamik Sharma - AI and Sustainability - How to make them coexist?</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
</style>


<script src="../../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../../site_libs/quarto-search/fuse.min.js"></script>
<script src="../../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../../">
<script src="../../site_libs/quarto-html/quarto.js"></script>
<script src="../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../../site_libs/quarto-html/anchor.min.js"></script>
<link href="../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "textbox",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>


</head>

<body class="nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg navbar-dark ">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container">
    <a class="navbar-brand" href="../../index.html">
    <span class="navbar-title">Aryamik Sharma</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item">
    <a class="nav-link" href="../../posts.html" rel="" target="">
 <span class="menu-text">Sympatheia</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../Disclaimer.html" rel="" target="">
 <span class="menu-text">Disclaimer</span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://www.linkedin.com/in/aryamik-sharma" rel="" target=""><i class="bi bi-linkedin" role="img">
</i> 
 <span class="menu-text"></span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="mailto:aryamik.sharma@uwaterloo.ca" rel="" target=""><i class="bi bi-envelope" role="img" aria-label="email">
</i> 
 <span class="menu-text"></span></a>
  </li>  
</ul>
            <div class="quarto-navbar-tools">
</div>
          </div> <!-- /navcollapse -->
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<header id="title-block-header" class="quarto-title-block default page-columns page-full">
  <div class="quarto-title-banner page-columns page-full">
    <div class="quarto-title column-body">
      <h1 class="title">AI and Sustainability - How to make them coexist?</h1>
                                <div class="quarto-categories">
                <div class="quarto-category">AI</div>
                <div class="quarto-category">Sustainability</div>
              </div>
                  </div>
  </div>
    
  
  <div class="quarto-title-meta">

      <div>
      <div class="quarto-title-meta-heading">Author</div>
      <div class="quarto-title-meta-contents">
               <p><a href="https://aryamik.github.io">Aryamik Sharma</a> </p>
            </div>
    </div>
      
      <div>
      <div class="quarto-title-meta-heading">Published</div>
      <div class="quarto-title-meta-contents">
        <p class="date">July 21, 2024</p>
      </div>
    </div>
    
      
    </div>
    
  
  </header><div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
    </div>
<!-- main -->
<main class="content quarto-banner-title-block page-columns page-full" id="quarto-document-content">




<p>AI and Sustainability - two of the hottest topics right now. From regulators to policymakers, businesses, research institutions, non-governmental organizations (NGOs), academia, investors, consumers, and communities at large, everyone wants to see what does AI have to offer while at the same time Earth is witnessing <a href="https://www.theguardian.com/environment/article/2024/jul/08/temperatures-1-point-5c-above-pre-industrial-era-average-for-12-months-data-shows">record temperatures</a>.</p>
<p>The other day I saw a headline that read something along the lines of ‘STOP USING ChatGPT BECAUSE IT IS BAD FOR THE ENVIRONMENT!!!’.</p>
<p>Naturally, it got me curious and I decided to do a deep dive to explore the interplay between these two areas and address the question ‘how do we make them compatible?’</p>
<p>In <a href="https://iea.blob.core.windows.net/assets/6b2fd954-2017-408e-bf08-952fdd62118a/Electricity2024-Analysisandforecastto2026.pdf">Electricity 2024</a>, IEA reported that data center electricity usage is set to double by 2026 due to the rise of power-intensive workloads such as AI and cryptocurrency mining.</p>
<div class="quarto-figure quarto-figure-center page-columns page-full">
<figure class="figure page-columns page-full">
<p><a href="https://iea.blob.core.windows.net/assets/6b2fd954-2017-408e-bf08-952fdd62118a/Electricity2024-Analysisandforecastto2026.pdf"><img src="images/Screenshot from 2024-07-07 17-48-32.png" class="img-fluid figure-img"></a></p>
<figcaption class="figure-caption margin-caption">Source: IEA - Electricity 2024 - Analysis and Forecast to 2026</figcaption>
</figure>
</div>
<p>Within the data center segment, IEA wrote that computing power and cooling were the two most energy-intensive processes within data centers. Additionally, the report noted how the rapid growth of artificial intelligence-related services over the last 12 months means providers have invested in power-hungry GPUs.</p>
<p>According to OpenAI, the amount of computing power used for deep learning research since 2012 has been <a href="https://openai.com/index/ai-and-compute/">doubling every 3.4 months</a>. In a 2018 study, researchers at the University of Massachusetts, Amherst, performed a life cycle assessment for training several common large AI models and found that training these large AI models can emit more than <a href="http://arxiv.org/abs/1906.02243">626,000 pounds of carbon dioxide equivalent</a>—nearly five times the lifetime emissions of the average American car. One also needs to factor in the additional footprint of hardware manufacturing, transportation, infrastructure overheads as well the <a href="https://arxiv.org/abs/2304.03271">water required</a> for running these models.</p>
<div class="quarto-figure quarto-figure-center page-columns page-full">
<figure class="figure page-columns page-full">
<p><a href="https://arxiv.org/abs/1906.02243"><img src="images/Screenshot from 2024-07-21 10-33-04.png" class="img-fluid figure-img"></a></p>
<figcaption class="figure-caption margin-caption">Source: Strubell et al.</figcaption>
</figure>
</div>
<p>In an age where there semiconductors are becoming a hot commodity, NVIDIA being <a href="https://www.bloomberg.com/news/articles/2024-06-18/nvidia-becomes-world-s-largest-firm-as-ai-rally-steams-ahead?srnd=homepage-americas&amp;sref=CIpmV6x8">the world’s most valuable publicly traded company</a>; all these figures shouldn’t come as a shocker.</p>
<p>A surge in demand for the data centers required for artificial intelligence is having an impact on Big Tech’s carbon emissions. Google recently released its <a href="https://www.gstatic.com/gumdrop/sustainability/google-2024-environmental-report.pdf">Environmental Report</a>. The report states:</p>
<blockquote class="blockquote">
<p>In 2023, our total GHG emissions were 14.3 million tCO2e, representing a 13% year-over- year increase and a 48% increase compared to our 2019 target base year. This result was primarily due to increases in data center energy consumption and supply chain emissions. As we further integrate AI into our products, reducing emissions may be challenging due to increasing energy demands from the greater intensity of AI compute, and the emissions associated with the expected increases in our technical infrastructure investment.</p>
</blockquote>
<p>Microsoft is in the same boat as well. The Seattle-based company’s total planet-warming impact is about 30% higher today than it was in 2020, according to the latest <a href="https://query.prod.cms.rt.microsoft.com/cms/api/am/binary/RW1lMjE">sustainability report</a>.</p>
<p>Interestingly enough, Amazon’s GHG emissions dropped by 3% in <a href="https://sustainability.aboutamazon.com/2023-sustainability-report.pdf">2023</a>. Amazon has pledged to spend more than <a href="https://www.bloomberg.com/news/articles/2024-03-28/amazon-bets-150-billion-on-data-centers-required-for-ai-boom">$150 billion</a> on data centers in the next 15 years. It would be interesting to see how it all plays out for them.</p>
<p>But maybe these emissions will offset themselves in a couple of years as AI systems get more efficient? Atleast, that’s what Bill Gates has to say on this matter. He believes that AI will <a href="https://www.bloomberg.com/news/articles/2024-06-26/why-bill-gates-is-bullish-on-artificial-intelligence-and-nuclear-energy">‘pay for itself’</a> when it comes to its associated environmental costs and AI is already being used to solve some of the pressing environmental problems such as <a href="https://www.sciencedirect.com/science/article/pii/S2352484723011459">optimizing energy demand</a>, <a href="https://www.researchgate.net/publication/358955485_Flood_Prediction_Using_Machine_Learning_Models_A_Case_Study_of_Kebbi_State_Nigeria">developing early warning systems</a> for natural disasters, development of <a href="https://link.springer.com/referenceworkentry/10.1007/978-3-030-45106-6_80">adaptation strategies for businesses and communties</a>. So according to Gates, that ‘extra 5%’ of energy demand is not the thing that prevents our climate goals.</p>
<p>When I heard that interview, the first thought I had was “I agree”. AI is already showing promising results in multiple areas and some of these climate solutions are just tip of the iceberg - and they are only going to get better.</p>
<p>Now it becomes a moral question : ‘Given the promising solutions that AI has to offer for addressing some of the pressing problems, why would we NOT want to continue to use AI?’</p>
<p>It’s the same rationale computer scientist Moshe Vardi has when it comes to developing self driving cars. He views it as a <a href="https://www.huffpost.com/entry/the-moral-imperative-thats-driving-the-robot-revolution_n_56c22168e4b0c3c550521f64">moral imperative</a> given how many lives could be saved by automated driving. Going back to Ethics 101, this moral imperative stems from the ethical theory of <a href="https://en.wikisource.org/wiki/Utilitarianism/Chapter_2">Utilitarianism</a> where the morally right action is the one that produces the greatest amount of happiness or pleasure (and the least amount of pain or suffering) for the largest number of people. If we apply this utilitarian approach to the case of AI and Sustainability, it is in our best interests to atleast consider that AI does offer a path to a sustainable future.</p>
<p>However despite all this evidence, something just doesn’t sit right with me. There is still a looming thought in my head ‘What if those reactionary headlines that I read are true? What if using ChatGPT is indeed causing degradation of global ecosystems?’</p>
<p>The idea that AI benefits will offset the environmental costs is based on the assumption that AI developments will continue to grow and with the passage of time AI systems will get more efficient. But what if it is the other way round? What if the environmental costs of running these systems outweigh the benefits they have to offer?</p>
<p>Historically, the rate of improvement of computing technology has been described by the famous Moore’s law, which in one of its variations states that <a href="https://firstmonday.org/ojs/index.php/fm/article/view/1000/921">computing power per dollar doubles every 18 months or so</a>. Yes, there are physical limits to Moore’s law but there is still room for advances in computing technology. As Max Tegmark points out in Life 3.0, once technology gets twice as powerful, it can often be used to design and build technology that’s twice as powerful in turn, triggering repeated capability doubling in the spirit of Moore’s law. We are making breakthroughs in AI that enables us to do more with less. Consider <a href="https://arxiv.org/pdf/2203.15556">DeepMind’s Chinchilla</a> which highlighted that AI models could be using radically less computing power, by changing the ratio between the amount of training data and the size of the resulting model. One would assume that this efficiency would translate into AI systems using less electricity. Turns out that was not the case and it resulted in the <a href="https://www.theguardian.com/business/article/2024/jul/04/can-the-climate-survive-the-insatiable-energy-demands-of-the-ai-arms-race">same amount of electricity being used</a>.</p>
<p>This is a classic example of a phenomenon referred to as “<a href="https://www.tandfonline.com/doi/abs/10.1080/15487733.2009.11908028">Jevons’ paradox</a>”, named after the English economist William Stanley Jevons who noted who noted that improvements that increased the efficiency of coal use such as the James Watt steam engine led to increased consumption of fossil fuel burned in England during the Industrial Revolution. As a result, he argued that, contrary to common intuition, technological progress could not be relied upon to reduce fuel consumption. Many <a href="https://link.springer.com/chapter/10.1007/978-3-030-79496-5_33">worry</a> that in our quest to develop AI systems to solve , something similar may play out - where better AI systems end up driving the demand for resources rather than a decrease in resource consumption. This means more electricity consumed to fuel these systems.</p>
<p>The concern now becomes - can these AI systems that are being developed to address the sustainability problems end up backfiring and undo all the hard work that we have done?More importantly can we develop these solutions before we surpass the <a href="https://www.ncbi.nlm.nih.gov/pmc/articles/PMC10499318/">planetary boundaries</a>?</p>
<p>Fortunately, these two seemingly incompatible domains can be made more compatible. Recent research by <a href="https://arxiv.org/abs/2211.02001">Luccioni et al. (2022)</a> on the carbon footprint of BLOOM, a 176-billion parameter language model, showed that both the manufacturing of equipment, model training and deployment can be carried out in a way that results in negligible amounts of carbon emissions when compared to other similar size models.</p>
<p>In a policy brief titled ‘<a href="https://cifar.ca/wp-content/uploads/2023/09/Towards-Measuring-and-Mitigating-the-Environmental-Impacts-of-Large-Language-Models.pdf">TOWARDS MEASURING AND MITIGATING THE ENVIRONMENTAL IMPACTS OF LARGE LANGUAGE MODELS</a>’, Dr.&nbsp;Luccioni further highlights some recommendations for responsible LLM innovation with sustainability in mind:</p>
<ol type="1">
<li><p>Creating standards and frameworks for evaluating and reporting the carbon footprint of large language models</p></li>
<li><p>Developing tools for accurate energy estimation</p></li>
<li><p>Mandates for environmental impact with the release of LLM-based systems</p></li>
<li><p>The creation of certification and ratings of AI models</p></li>
<li><p>Carbon-aware model training</p></li>
<li><p>Expanding renewable energy resources</p></li>
</ol>
<p>Similarly, Association of Computational Logistics (ACL) outlined <a href="https://public.ukp.informatik.tu-darmstadt.de/enlp/Efficient-NLP-policy-document.pdf">recommendations</a> to address some of the environmental concerns in Natural Language Processing (NLP) by:</p>
<ol type="1">
<li><p>Increasing the alignment between experiments and research hypotheses</p></li>
<li><p>Encouraging the release of trained models</p></li>
<li><p>Setting up tracks that target efficiency</p></li>
</ol>
<p>These are just two examples that highlight the good work that is being done to address this problem from both sides. This is where approaching this problem through the lens of ‘<a href="https://eur-lex.europa.eu/legal-content/EN/TXT/PDF/?uri=CELEX:52019XC0620(01)">double materiality</a>’ might be useful - where we consider not just the impact of AI on sustainability but also the impact of sustainability on AI.</p>
<p>The key takeaway is addressing this problem will require creative solutions from both sides. The AI community will need to figure out how can they make these systems that minimize environmental impact. On the flip side, governments, policymakers, researchers, businesses, non-profits will need to brainstorm new uses cases for AI in solving some of the sustainability problems which includes negative impacts of large scale AI deployment.</p>
<p>At the end of the day, we need to realize that AI is just one of the many tools in our arsenal for addressing the sustainability challenges we face. Policy making, strong governance, and technological innovation are all essential components for achieving our ambitious goals.</p>
<p>The question is not whether ChatGPT is good/bad for the environment. A broader question that we should instead focus on:</p>
<blockquote class="blockquote">
<p>Can we figure out a way to save our planet using AI within this narrow window of opportunity?</p>
</blockquote>



</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
<script src="https://utteranc.es/client.js" repo="Aryamik/aryamik.github.io" issue-term="pathname" theme="github-light" crossorigin="anonymous" async="">
</script>
</div> <!-- /content -->



</body></html>